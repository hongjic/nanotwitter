<!Doctype html>
<html>
<head>
</head>
<body>
  <h2>Join Twitter today.</h2>
  <input type="text" placeholder="email" id="email" />
  <input type="text" placeholder="username" id="username" />
  <input type="password" placeholder="password" id="password" />
  <input type="password" placeholder="password again" id="password2" />
  <button id="sign_up">Sign up</button>
  <p id="tips"></p>
</body>
<script src="js/jquery.min-2.1.4.js"></script>
<script type="text/javascript">
  function register(username, password, password2, email) {
    data = {username: username, password: password, password2: password2, email: email};
    $.ajax({
      type: "post",
      contentType: "application/json;charset=utf-8",
      dataType: "json",
      url: "/api/v1/users",
      data: JSON.stringify(data),
      success: function(result) {
        if (result.resultCode == "success") {
          document.cookie = "access_token=" + result.resultMsg.access_token
          window.location = "/";
        }
        else $("#tips").text(result.resultMsg);
      }
    })
  }

  function password_not_match() {
    $("#tips").text("Password not match, please type again.");
    $("#password").text("");
    $("#password2").text("");
  }

  $("#sign_up").click(function(){
    var username = $("#username").val();
    var password = $("#password").val();
    var password2 = $("#password2").val();
    var email = $("#email").val();
    register(username, password, password2, email);
  });

</script>
</html>