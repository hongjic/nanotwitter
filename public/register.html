<!Doctype html>
<html>
<head>
</head>
<body>
  <h2>Join Twitter today.</h2>
  <ul>
    <li>
      <input type="text" placeholder="email" id="email" />
    </li>
    <li>
      <input type="text" placeholder="username" id="username" />
    </li>
    <li>
      <input type="password" placeholder="password" id="password" />
    </li>
    <li>
      <input type="password" placeholder="password again" id="password2" />
    </li>
    <li>
      <button id="sign_up">Sign up</button>
    </li>
  </ul>
  <p id="tips"></p>
</body>
<script src="js/jquery.min.js"></script>
<script type="text/javascript">
  function register(username, password, password2, email) {
    data = {username: username, password: password, password2: password2, email: email};
    $.ajax({
      type: "post",
      dataType: "json",
      url: "/register",
      data: data,
      success: function(result) {
        if (result.resultCode == "success") {
          localStorage.setItem("access_token", result.resultMsg.access_token);
          window.location = "/";
        }
        else $("#tips").text(result.resultMsg);
      }
    })
  }

  function password_not_match() {
    $("#tips").text("Password not match, please type again.");
    $("#password").text("");
    $("#password2").text("");
  }

  $("#sign_up").click(function(){
    var username = $("#username").val();
    var password = $("#password").val();
    var password2 = $("#password2").val();
    var email = $("#email").val();
    register(username, password, password2, email);
  });

</script>
</html>